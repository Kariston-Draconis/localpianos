<input type="hidden" id="coordinates" value="<%=
@coordinates.to_json %>">

<div class="index-container">
  <div class="top-input">
    <input class="input-text" type="search" id="search_string" placeholder="search locations">
    <!-- <button class="input-button" type="button" id="search_btn">GO</button> -->
  </div>

  <div id="googleMap" style="position: relative; overflow: hidden;"></div>

  <div id="tile">
    <!-- <p>Your piano details</p> -->
  </div>
</div>





<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyASps5hTZ-16jFKeoywD5bycvwAt0VQp9c&libraries=places"></script>

<script>
var pac_input = document.getElementById('search_string');

(function pacSelectFirst(input) {
  var _addEventListener = (input.addEventListener) ? input.addEventListener : input.attachEvent;
  function addEventListenerWrapper(type, listener) {
    if (type == "keydown") {
      var orig_listener = listener;
      listener = function(event) {
        var suggestion_selected = $(".pac-item-selected").length > 0;
        if (event.which == 13 && !suggestion_selected) {
          var simulated_downarrow = $.Event("keydown", {
            keyCode: 40,
            which: 40
          });
          orig_listener.apply(input, [simulated_downarrow]);
        };
        orig_listener.apply(input, [event]);
      };
    }
    _addEventListener.apply(input, [type, listener]);
  }
  input.addEventListener = addEventListenerWrapper;
  input.attachEvent = addEventListenerWrapper;
  var autocomplete = new google.maps.places.Autocomplete(input);
})(pac_input);
</script>

<script type="template" id="tile-template">
<div class="tile-contents">
  <div class="tile-header">
    <div class="piano-image" style="background-image: url( {{ image_url }} )"></div>
    <div class="piano-address">
      Piano at
      {{ address }}
    </div>
    <div class="piano-category">
      Category:
      {{ category }}
    </div>
    <div class="tile-close">
      <span onclick="closeTile()">X</span>

    </div>

  </div>
  <div class="tile-body">
    <div class="piano-location-description">
      {{ location_description }}</div>
    <div class="piano-piano-description">
      {{ piano_description }}</div>
    <div class="piano-access-description">
      {{ access_description }}</div>
  </div>
  <div class="tile-footer"></div>
  <span onclick="addStar({{ id }})">S</span>
</div>
</script>
